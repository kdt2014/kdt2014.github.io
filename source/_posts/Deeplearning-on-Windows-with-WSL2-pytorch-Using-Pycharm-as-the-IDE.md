---
title: Deeplearning on Windows with WSL2 pytorch - Using Pycharm as the IDE
tags:
  - 教程
  - 深度学习
categories: 教程
copyright: true
description: Deep learning training in Windows using Pycharm with wsl ubuntu
abbrlink: b96fcdf1
date: 2023-03-24 15:15:03
update: 2023-03-24 15:15:03
---
## Directory
- Preface
- Install WSL
- WSL installs Anaconda and configures the environment
- Pycharm connects to WSL and uses the environment generated by conda

## Preface

Generally speaking, the efficiency of deep learning training under Linux system is higher than that of Windows system, and everyone usually uses Ubuntu, a common distribution of Linux. But Ubuntu is not very friendly to everyday use, so there is a compromise and use Windows Subsystem Linux (WSL).

After testing, the training efficiency in WSL is about 25% better than Windows. CUDA118 is used in the following tests, the only difference is that the Python version is 3.9 and the other is 3.10.

![Windows](https://s2.loli.net/2023/03/22/PQYkfEWDysUcCNZ.png "Windows_cu118_py39")

![ubuntu20](https://s2.loli.net/2023/03/22/ojpRTbrQJi4D1e8.png "ubuntu20.04_cu118_py39")

![ubuntu22](https://s2.loli.net/2023/03/22/O3Q95mYxHWcB1GT.png "ubuntu22.04_cu118_py310")

![interpreter](https://s2.loli.net/2023/03/22/oaiBn6FWzmxcbHf.png "Python Interpreter")

Video tutorial links：[Bilibili](https://www.bilibili.com/video/BV1ok4y1t7XC/)，[Youtube](https://youtu.be/buyogP-KS5w)

## Install WSL

This part refers to the previous blog [Windows 11 installation of WSL2, ROS and window visualization](https://www.gongsunqi.xyz/posts/451c48f3/), only need to install WSL2, install ROS part of the part do not care.

You can also find this part in the video tutorial start part.

## WSL installs Anaconda and configures the environment

Open the previously installed Ubuntu system in the terminal that comes with Windows 11, and then the operation is exactly the same as using the command line on the Ubuntu host.

![](https://s2.loli.net/2023/03/22/ZpNOkRvFwSu8K9H.png)

- Install Anaconda

[Anaconda3](https://www.anaconda.com/products/distribution) official download, select the Linux version, right-click on it with the mouse, and copy the link.

![](https://s2.loli.net/2023/03/22/9PVLksuX6BCxaU8.png)

Back in Ubuntu's terminal, type:

    wget https://repo.anaconda.com/archive/Anaconda3-2023.03-Linux-x86_64.sh

Run the above code and download Anaconda3 to WSL Ubuntu.

![](https://s2.loli.net/2023/03/22/yemLhduQx1rHBGP.png)

After that, execute:

    sh Anaconda3-2023.03-Linux-x86_64.sh

Just type sh A and press the Tab key, and the system will automatically complete the following content.

The next step is the installation process, just press enter or enter yes when prompted.

- Conda configures the environment

1. Conda creates a virtual environment

        conda create --name cu118py310 python=3.10  
        conda activate cu118py310 

    ![conda env](https://s2.loli.net/2023/03/23/imlkrNDYjoqIObA.png "create virtual env")

    ![activate](https://s2.loli.net/2023/03/23/3ZOdr5pcqtUivIB.png "activate env")

    [The commonly used conda command](https://blog.csdn.net/u014628771/article/details/80066624)


2. Configure pytorch

    Go to the [pytorch official website](https://pytorch.org/get-started/locally/), select the desired environment (note that Linux OS is selected here), copy the conda command, paste in terminal, enter, and install the environment:

    ![](https://s2.loli.net/2023/03/22/VWK7jPvda2rwYsg.png)

        conda install pytorch torchvision torchaudio pytorch-cuda=11.8 -c pytorch -c nvidia

    ![pytorch环境](https://s2.loli.net/2023/03/23/DSwiAanLlV98M3j.png "Configure pytorch")

    This concludes the environment configuration of WSL.

## Pycharm connects to WSL and uses the environment generated by conda

Pycharm Professional Edition (Community Edition and Education Edition do not have convenient WSL function), click the bottom right and select Add New Interpreter, the operation is shown in the following figure:

![wsl interpreter](https://s2.loli.net/2023/03/23/217LZ495MFT6GCu.png "add wsl interpreter")

Select the Linux_distribution you created and Next:

![](https://s2.loli.net/2023/03/23/VvnQa8Zr6qYkSPD.png)

Virtualenv Enviroment--Existing -- click...-- Select this path \\wsl$\Ubuntu-22.04\home\username\anaconda3\envs\cu118py310\bin\python3，Create。

![](https://s2.loli.net/2023/03/23/3r8Fdsbcv7elPZ2.png)

Wait a few moments and the new environment will be configured. Then you can use this environment to train and run!